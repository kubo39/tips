# My thought of testing

- 静的型検査がある言語を使う
  - 失敗することのないI/Fはテストを簡単にし量を減らせる
- テストもなるべく共通化を意識
  - パラメータ化テストが目指す形
    - この形になっていれば非常に保守しやすいテストにになっている証
  - xUnit Test Patterns
    - Creation Method
    - Custom Assetion
    - 4 phase test
      - この形になってはじめてパラメータ化テストを検討できる
      - いきなり持ち込めるものではない
  - 共通部分をユーティリティに
    - パラメータのValidationとか
    - コピペを減らせる
      - コピペならここだけ変更し忘れが起きやすい
- コントローラー層のテストは薄く
  - コントローラー層でやっているのは繋ぎこみの部分が主
  - テストダブルを使ってモデルへの依存を小さく
    - 依存があると連鎖的にテストが落ちる
      - なにが問題だったのか一眼でわかりにくい
- モデル層のテストは厚く
  - だいたいビジネスロジックで一番大切なところなので手厚く
- 小さなテストユーティリティやコンポーネントを作る
  - 責務を小さく、明確に
- カバレッジに騙されない
  - テストケースの数とカバレッジは直交する
  - テストケースの数が減るような設計を重視すべき
- テストをいつ書くか
  - 設計が固まってないときにこそ先にテストを書くべき
    - テストしやすい設計に自然となる
    - テストが書きづらいコードはプロダクションコードからみても使いづらい
- "理想のテスト" レポジトリを作る
  - 目指すべきテスト設計について議論と共有できる場所を作る

